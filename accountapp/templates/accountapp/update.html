{% extends 'base.html' %}
{% block content %}
<div class="password_change_container">
    <div>
        <h4>비밀번호 변경</h4>
    </div>
    <form action="{% url 'accountapp:update'%}" method="post">
        {% csrf_token %}
        <div>
            {{ password_change_form.old_password }}
            <script type="text/javascript">
                if (document.getElementsByName('old_password')[0].value != '') {
                    document.getElementsByName('label_old_password')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.old_password.errors %}
            <script type="text/javascript">
                document.getElementsByName('old_password')[0].setAttribute('class', 'form-control is-invalid');
            </script>
            {% for error in password_change_form.old_password.errors %}
            <div class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div>
            {{ password_change_form.new_password1 }}
            <script type="text/javascript">
                if (document.getElementsByName('new_password1')[0].value != '') {
                    document.getElementsByName('label_new_password1')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.new_password1.errors %}
            <script type="text/javascript">
                document.getElementsByName('new_password1')[0].setAttribute('class', 'form-control is-invalid');
            </script>
            {% for error in password_change_form.new_password1.errors %}
            <div class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div>
            {{ password_change_form.new_password2 }}
            <script type="text/javascript">
                if (document.getElementsByName('new_password2')[0].value != '') {
                    document.getElementsByName('label_new_password2')[0].setAttribute('class', 'active');
                }
            </script>
            {% if password_change_form.new_password2.errors %}
            <script type="text/javascript">
                document.getElementsByName('new_password2')[0].setAttribute('class', 'form-control is-invalid');
            </script>
            {% for error in password_change_form.new_password2.errors %}
            <div style="white-space: nowrap;" class="invalid-feedback">
                {{ error }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div style="margin: 1rem auto 2rem auto;">
            <small>
                최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
            </small>
        </div>
        <div style="text-align: center;">
            <p style="color:gray; margin-bottom: 1rem;">&nbsp;{{user.username}}계정의 비밀번호를 변경합니다.</p>
        </div>
        <div style="margin-top: 2rem;">
            <a href="{%url 'accountapp:detail' pk=user.id %}" class="btn btn-sm" id="back_btn">&nbsp;돌아가기</a>
            <button type="submit" class="btn btn-sm" id="detail_btn">&nbsp;변경하기</button>
        </div>
    </form>
</div>
<style>
    .password_change_container {
        text-align: center;
        max-width: 31rem;
        min-height: 31rem;
        margin: 4rem auto;
        border-radius: 1rem;
        box-shadow: 0 0 4px #ccc;
        padding: 3rem;
    }

    .old_password,
    .new_password1,
    .new_password2 {
        width: 20rem;
        margin: 1rem;
    }

    input::placeholder {
        font-size: 1rem;
    }

    input:focus::-webkit-input-placeholder {
        color: transparent;
    }
</style>
{% endblock %}