{% extends 'base.html' %}
{% block content %}
<div class="article_container">
    <div class="article_image_container">
        <img class="article_image" src="{{target_article.image.url}}" alt="">
    </div>
    <div class="article_content_container">
        <div class="article_content">
            <div style="margin: 1rem; height: 10%;">
                <div class="dropdown">
                    <span class="material-icons more_horiz">
                        more_horiz
                    </span>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="{% url 'articleapp:download' target_article.pk %}">이미지 다운로드</a>
                        </li>
                        {% if target_article.writer == user %}
                        <li>
                            <a href="{% url 'articleapp:update' target_article.pk %}">
                                글 수정
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'articleapp:delete' target_article.pk %}">
                                글 삭제
                            </a>
                        </li>
                        {%endif%}
                    </ul>

                </div>
                <a class="btn btn-primary rounded-pill col-2" href="{% url 'articleapp:download' target_article.pk %}"
                    style="float: right;">저장</a>
                {% include 'snippets/like.html' with article=target_article %}

            </div>
            <div style="margin-left: 2rem;">
                <h4 class="article_title" style="margin-bottom: 0.8rem;">
                    {{target_article.title}}
                </h4>
                <div class="content" style="text-align:left; margin-bottom: 0.8rem;">
                    {{target_article.content | safe }}
                </div>
                <div style="margin-bottom: 2rem; position: relative;">
                    {% if target_article.writer.profile %}
                    <img src="{{target_article.writer.profile.image.url}}" alt=""
                        style="height: 2.5rem; width: 2.5rem; border-radius: 20rem; object-fit: cover;">
                    <span class="writer" style="margin-bottom: 0.8rem;">
                        {{target_article.writer.profile.nickname}}
                    </span>
                    {%else%}
                    <i class="fas fa-user-circle" style="font-size: 2rem;"></i>
                    <span class="writer" style="margin-bottom: 0.8rem; position: absolute; top: 0.2rem; width: 2rem; margin-bottom: 0.8rem; left: 2.5rem;">
                        {{target_article.writer.username}}
                    </span>
                    {%endif%}
                </div>
            </div>
            <div style="margin: 0 0 2rem 2rem; width: 100%;">
                <h3 style="float: left;">댓글</h3>
                <button class="btn material-icons comment_btn">
                    keyboard_arrow_right
                </button>
                <button class="btn material-icons comment_btn" style="display: none;">
                    keyboard_arrow_down
                </button>
            </div>
            <div class="comments">
                {% for comment in target_article.comment.all %}
                {% include 'commentapp/detail.html' with comment=comment %}
                {%endfor%}

                {% include 'commentapp/create.html' with article=target_article %}

            </div>
        </div>
    </div>
</div>
<script>
    $('.comment_btn').click(function () {
        this.blur()
        $('.comment_btn').toggle();
        $('.comments').toggle();
    });
    $('.more_horiz').click(function () {
        this.blur()
        $('.dropdown-menu').toggle();

    });

</script>
<style>
    .comment_btn:hover {
        background-color: #c7c1c1;
    }

    .comment_btn {
        font-size: 2rem;
        padding: 0;
        border-radius: 10rem;
    }

    .more_horiz {
        float: left;
        height: 100%;
        margin-right: 0.5rem;
        border-radius: 10rem;
    }

    .more_horiz:hover {
        background-color: #c7c1c1;
    }

    .dropdown-menu {
        list-style-type: none;
        position: absolute;
        z-index: 1;
        top: 2rem;
        left: 0;
        min-width: 160px;
        padding: 0.4rem 0;
        display: none;
        border-radius: 1rem;
        box-shadow: 0 0 4px #ccc;
        font-weight: bold;
    }

    .dropdown-menu li:hover {
        background-color: #c7c1c1;
    }

    .dropdown-menu li {
        width: 100%;
        height: 25%;
    }

    .dropdown-menu li a {
        margin-left: 1rem;
    }
</style>
{% endblock %}